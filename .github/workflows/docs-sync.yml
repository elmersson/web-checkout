name: Documentation Sync
on:
  pull_request:
    types: [opened, synchronize]

jobs:
  docs:
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0  # Full history needed for base branch comparison

      - uses: elmersson/company-docs/.github/actions/docs-sync@main
        with:
          service-name: web-checkout
          repo-type: frontend
          framework: react

          # Customize these patterns to match your project structure:
          api-call-patterns: '["src/api/**/*.ts", "src/services/**/*.ts", "src/hooks/**/*.ts"]'
          dto-patterns: '["src/types/**/*.ts"]'

          # Secrets
          anthropic-api-key: ${{ secrets.ANTHROPIC_API_KEY }}
          docs-repo-token: ${{ secrets.DOCS_REPO_TOKEN }}
